with tf.gfile.FastGFile(filepath, 'rb') as f: # Read the image <extra_id_0> and <extra_id_1> it to BGR. # If we cannot read the image, bail. image = tf.image.decode_jpeg(f.read(), channels=3) # <extra_id_2> that we materialize the <extra_id_3> without scaling. image = tf.cast(image, tf.float32) # The image_summary op will sometimes <extra_id_4> out the serialized proto in UTF-8. # So we convert it to a string, which is what we want. image_summary = tf