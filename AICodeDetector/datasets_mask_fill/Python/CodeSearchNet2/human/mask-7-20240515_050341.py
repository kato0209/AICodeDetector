static_target_shape = tf.TensorShape(static_target_shape) if tensorshape_util.is_fully_defined( static_shape) and tensorshape_util.is_fully_defined(static_target_shape): if static_shape != static_target_shape: raise ValueError("{}: <extra_id_0> shape {} but <extra_id_1> {}". format(name, static_target_shape, static_shape)) <extra_id_2> None else: if dynamic_target_shape is None: if tensorshape_util.is_fully_defined(static_target_shape): dynamic_target_shape = tensorshape_util.as_list(static_target_shape) else: raise ValueError("{}: cannot infer target shape: no dynamic shape "