# strategy: # <extra_id_0> a <extra_id_1> of <extra_id_2> name -> [variable, grad, adagrad slot] vars_grads = {} for v in tf.trainable_variables(): vars_grads[v.name] = [v, None, None] for g, v in grads: vars_grads[v.name][1] = g vars_grads[v.name][2] = opt.get_slot(v, 'accumulator') # now make summaries <extra_id_3> = [] for vname, (v, g, a) in vars_grads.items(): if g is None: continue