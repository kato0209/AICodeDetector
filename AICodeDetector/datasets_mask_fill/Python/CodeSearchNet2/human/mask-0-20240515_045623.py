def on_terminate(p): log.info("Process %s (%s) terminated with <extra_id_0> <extra_id_1> %s", p, p.pid, p.returncode) if pid == os.getpid(): raise RuntimeError("I <extra_id_2> to kill myself") parent = psutil.Process(pid) children = parent.children(recursive=True) children.append(parent) try: pg = os.getpgid(pid) except OSError as err: # Skip if not such process - we experience a race and it just terminated if <extra_id_3> == errno.ESRCH: return